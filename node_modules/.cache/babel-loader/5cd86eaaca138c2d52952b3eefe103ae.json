{"ast":null,"code":"var _jsxFileName = \"/Users/shabeerhussain/ironhack/labs/proj3/client/src/components/bookings.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nclass Bookings extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      orders: [],\n      user: localStorage.getItem('user')\n    };\n\n    this.logout = () => {\n      localStorage.removeItem('user');\n      this.props.history.push('/login');\n    };\n  }\n\n  componentDidMount() {\n    const user = JSON.parse(this.state.user);\n    fetch(`http://localhost:3001/orders/${user.user._id}/${user.user.userType}`).then(data => data.json()).then(data => {\n      this.setState({ ...this.state,\n        orders: data\n      });\n    });\n  }\n\n  render() {\n    var _this$user, _this$user$user, _this$user$user2, _this$user2, _this$user2$user;\n\n    const {\n      orders\n    } = this.state;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-12 menubar\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 31\n      }\n    }, /*#__PURE__*/React.createElement(\"b\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 1\n      }\n    }, ((_this$user = this.user) === null || _this$user === void 0 ? void 0 : (_this$user$user = _this$user.user) === null || _this$user$user === void 0 ? void 0 : _this$user$user.email) ? /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 30\n      }\n    }, (_this$user$user2 = this.user.user) === null || _this$user$user2 === void 0 ? void 0 : _this$user$user2.email, \" \", /*#__PURE__*/React.createElement(\"button\", {\n      onClick: this.logout,\n      className: \"btn btn-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 60\n      }\n    }, \"Logout\"), \" \", /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.props.history.push('/bookings'),\n      className: \"btn btn-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 131\n      }\n    }, \"Bookings\")) : '', ((_this$user2 = this.user) === null || _this$user2 === void 0 ? void 0 : (_this$user2$user = _this$user2.user) === null || _this$user2$user === void 0 ? void 0 : _this$user2$user.userType) == 1 ? /*#__PURE__*/React.createElement(\"button\", {\n      onClick: () => this.props.history.push('/addproducts'),\n      className: \"btn btn-link\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 37\n      }\n    }, \"Add Item\") : '')), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-link\",\n      onClick: () => this.props.history.push('/main'),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 20\n      }\n    }, \"Back\")), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 17\n      }\n    }, \"Orders\"), /*#__PURE__*/React.createElement(\"table\", {\n      className: \"table table-bordered\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 26\n      }\n    }, \"Booked by\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 25\n      }\n    }, \"Total Amount\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 25\n      }\n    }, \"Items\"), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 25\n      }\n    }, \"Status\")), orders.map(order => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 37\n        }\n      }, /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 33\n        }\n      }, order.user_id.email), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 33\n        }\n      }, order.total), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 29\n        }\n      }, order.items.map(item => {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 49\n          }\n        }, item.name, \" , \", item.price);\n      })), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 33\n        }\n      }, order.status == '1' ? 'Processing' : ''));\n    })));\n  }\n\n}\n\nexport default withRouter(Bookings);","map":{"version":3,"sources":["/Users/shabeerhussain/ironhack/labs/proj3/client/src/components/bookings.js"],"names":["React","Component","withRouter","Bookings","constructor","props","state","orders","user","localStorage","getItem","logout","removeItem","history","push","componentDidMount","JSON","parse","fetch","_id","userType","then","data","json","setState","render","email","map","order","user_id","total","items","item","name","price","status"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport  { withRouter } from 'react-router-dom'\r\n\r\n\r\nclass Bookings extends Component {\r\n    state = { orders: [],user:localStorage.getItem('user')};\r\n   \r\n  \r\n    constructor(props){\r\n        super(props);\r\n\r\n    }\r\n\r\n    componentDidMount() {\r\n        const user = JSON.parse(this.state.user);\r\n\t\tfetch(`http://localhost:3001/orders/${user.user._id}/${user.user.userType}`)\r\n\t\t\t.then((data) => data.json())\r\n            .then((data) => {this.setState({ ...this.state, orders: data });\r\n           \r\n        });\r\n           \r\n    }\r\n    logout = () => {\r\n        localStorage.removeItem('user');\r\n        this.props.history.push('/login');\r\n    }\r\n    render() {\r\n        const {\r\n\t\t\torders\r\n        } = this.state;\r\n        return (\r\n            <div className=\"container\">\r\n                              <div className=\"col-12 menubar\">\r\n\r\n<b>\r\n    {this.user?.user?.email?(<span>{this.user.user?.email} <button onClick={this.logout} className=\"btn btn-link\">Logout</button> <button onClick={()=>this.props.history.push('/bookings')} className=\"btn btn-link\">Bookings</button></span>):''}\r\n    {this.user?.user?.userType==1?( <button onClick={() => this.props.history.push('/addproducts')} className=\"btn btn-link\">Add Item</button>):''}\r\n    </b>\r\n\r\n    </div>\r\n                <p><button className=\"btn btn-link\" onClick={()=>this.props.history.push('/main')}>Back</button></p>\r\n                <h1>Orders</h1>\r\n                <table className=\"table table-bordered\">\r\n                    <tr>\r\n                         <td>Booked by</td>\r\n                        <td>Total Amount</td>\r\n                        <td>Items</td>\r\n                        <td>Status</td>\r\n                    </tr>\r\n                    {\r\n                        orders.map(order=>{\r\n                            return (<tr>\r\n                                <td>{order.user_id.email}</td>\r\n                                <td>{order.total}</td>\r\n                            <td>{\r\n                                    order.items.map(item=>{\r\n                                        return (<p>{item.name} , {item.price}</p>)\r\n                                    })\r\n                                }</td>\r\n                                <td>{order.status=='1'?'Processing':''}</td>\r\n                                \r\n                            </tr>)\r\n                        })\r\n                    }\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\n\r\nexport default withRouter(Bookings)"]},"metadata":{},"sourceType":"module"}