{"ast":null,"code":"var _jsxFileName = \"/Users/shabeerhussain/ironhack/labs/proj3/client/src/components/auth/login.js\";\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\n\nclass Login extends Component {\n  constructor(props) {\n    super(props);\n    this.usernameRef = React.createRef();\n    this.passwordRef = React.createRef();\n    this.state = {\n      loading: false\n    };\n\n    this.loginUser = async () => {\n      var _this$usernameRef$cur, _this$passwordRef$cur;\n\n      const data = {\n        user: {\n          email: (_this$usernameRef$cur = this.usernameRef.current) === null || _this$usernameRef$cur === void 0 ? void 0 : _this$usernameRef$cur.value,\n          password: (_this$passwordRef$cur = this.passwordRef.current) === null || _this$passwordRef$cur === void 0 ? void 0 : _this$passwordRef$cur.value\n        }\n      };\n      this.setState({ ...this.state,\n        loading: true\n      });\n\n      try {\n        const user = await fetch('http://localhost:3001/users/login', {\n          method: 'POST',\n          headers: {\n            \"Content-Type\": \"application/json\"\n          },\n          body: JSON.stringify(data)\n        }).then(data => data.json());\n        this.setState({ ...this.state,\n          loading: false\n        });\n        console.log(user);\n        localStorage.setItem('user', JSON.stringify(user));\n        this.props.history.push('/main');\n      } catch (error) {\n        this.setState({ ...this.state,\n          loading: false\n        });\n        alert('Invalid Username or Password');\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container loginpage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }\n    }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"exampleInputEmail1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }\n    }, \"Email address\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"email\",\n      className: \"form-control\",\n      id: \"exampleInputEmail1\",\n      \"aria-describedby\": \"emailHelp\",\n      placeholder: \"Enter email\",\n      ref: this.usernameRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 3\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      for: \"exampleInputPassword1\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 5\n      }\n    }, \"Password\"), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"password\",\n      className: \"form-control\",\n      id: \"exampleInputPassword1\",\n      placeholder: \"Password\",\n      ref: this.passwordRef,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }\n    })), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn btn-primary\",\n      onClick: this.loginUser,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 3\n      }\n    }, \"Login\")));\n  }\n\n}\n\nexport default withRouter(Login);","map":{"version":3,"sources":["/Users/shabeerhussain/ironhack/labs/proj3/client/src/components/auth/login.js"],"names":["React","Component","withRouter","Login","constructor","props","usernameRef","createRef","passwordRef","state","loading","loginUser","data","user","email","current","value","password","setState","fetch","method","headers","body","JSON","stringify","then","json","console","log","localStorage","setItem","history","push","error","alert","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nclass Login extends Component {\r\n    usernameRef = React.createRef();\r\n    passwordRef = React.createRef();\r\n    state = {loading:false}\r\n    constructor(props){\r\n        super(props);\r\n    }\r\n\r\n    loginUser = async () => {\r\n        const data = {user:{email:this.usernameRef.current?.value,password:this.passwordRef.current?.value}}\r\n        this.setState({...this.state,loading:true})\r\n        try {\r\n            const user = await fetch('http://localhost:3001/users/login',{method:'POST',headers: {\r\n                \"Content-Type\": \"application/json\"\r\n            },body:JSON.stringify(data)}).then(data=>data.json());\r\n        this.setState({...this.state,loading:false})\r\n        console.log(user)\r\n        localStorage.setItem('user',JSON.stringify(user))\r\n        this.props.history.push('/main');    \r\n     \r\n        } catch (error) {\r\n        this.setState({...this.state,loading:false})\r\n\r\n            alert('Invalid Username or Password');\r\n        }\r\n     \r\n    }\r\n    \r\n    render() {\r\n        return (\r\n            <div className=\"container loginpage\">\r\n                <div></div>\r\n                <h1>Login</h1>\r\n                <form>\r\n  <div className=\"form-group\">\r\n    <label for=\"exampleInputEmail1\">Email address</label>\r\n    <input type=\"email\" className=\"form-control\" id=\"exampleInputEmail1\" aria-describedby=\"emailHelp\" placeholder=\"Enter email\" ref={this.usernameRef}/>\r\n  </div>\r\n  <div className=\"form-group\">\r\n    <label for=\"exampleInputPassword1\">Password</label>\r\n    <input type=\"password\" className=\"form-control\" id=\"exampleInputPassword1\" placeholder=\"Password\" ref={this.passwordRef}/>\r\n  </div>\r\n \r\n  <button type=\"button\" className=\"btn btn-primary\" onClick={this.loginUser}>Login</button>\r\n</form>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default withRouter(Login);"]},"metadata":{},"sourceType":"module"}